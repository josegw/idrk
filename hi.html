<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Preguntas</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #ccc;
      font-family: Consolas, "Liberation Mono", Courier, monospace;
      font-size: 1.1em;
      user-select: none;
      height: 100%;
      overflow: hidden;
    }

    #terminal {
      padding: 10px;
      overflow-y: auto;
      max-height: 60vh;
    }

    .prompt {
      color: #8aff80;
    }

    .cursor {
      display: inline-block;
      width: 0.6ch;
      background-color: currentColor;
      animation: blink 1s steps(2) infinite;
      vertical-align: bottom;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    select, button {
      background-color: #111;
      color: #ccc;
      font: inherit;
      border: 1px solid #333;
      margin-left: 10px;
    }

    #chat {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      max-height: 40vh;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      font-family: 'Minecraftia', sans-serif;
      font-size: 14px;
      line-height: 1.4;
      padding: 10px;
      display: none;
      overflow-y: auto;
      animation: fadeIn 1s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .chat-message {
      margin-bottom: 5px;
    }

    .yellow {
      color: #fef535;
    }

    .click-continue {
      color: #ccc;
      opacity: 0.8;
      animation: blink 1s steps(2, start) infinite;
      cursor: pointer;
    }

    @font-face {
      font-family: 'Minecraftia';
      src: url('Minecraftia.woff') format('woff');
    }
  </style>
</head>
<body>

<div id="terminal"></div>
<div id="chat"></div>

<script>
  // Recargar al volver con botón atrás
  window.addEventListener('pageshow', (event) => {
    if (event.persisted) window.location.reload();
  });

  const terminal = document.getElementById("terminal");
  const chatContainer = document.getElementById("chat");

  function scrollToBottom() {
    chatContainer.scrollTop = chatContainer.scrollHeight;
    terminal.scrollTop = terminal.scrollHeight;
  }

  function addLine(text, isPrompt = true) {
    const p = document.createElement("p");
    if (isPrompt) {
      const prompt = document.createElement("span");
      prompt.className = "prompt";
      prompt.textContent = "chuki@chukisite:~$ ";
      p.appendChild(prompt);
    }
    const span = document.createElement("span");
    span.textContent = text;
    p.appendChild(span);
    terminal.appendChild(p);
    scrollToBottom();
  }

  function addSelectPrompt(question, callback) {
    const p = document.createElement("p");
    const prompt = document.createElement("span");
    prompt.className = "prompt";
    prompt.textContent = "chuki@chukisite:~$ ";
    p.appendChild(prompt);

    const label = document.createElement("span");
    label.textContent = question;
    p.appendChild(label);

    const select = document.createElement("select");
    const option1 = new Option("Sí", "si");
    const option2 = new Option("No", "no");
    select.add(option1);
    select.add(option2);
    p.appendChild(select);

    const btn = document.createElement("button");
    btn.textContent = "Confirmar";
    p.appendChild(btn);

    terminal.appendChild(p);
    scrollToBottom();

    btn.addEventListener("click", () => {
      btn.disabled = true;
      callback(select.value);
    });
  }

  function limpiarYRedirigir(url) {
    history.replaceState(null, "", location.pathname);
    window.location.href = url;
  }

  function mostrarChatMensajesSecuenciales(mensajes) {
    let index = 0;
    chatContainer.innerHTML = '';
    chatContainer.style.display = "block";

    function mostrarSiguienteMensaje() {
      const msg = mensajes[index];

      const line = document.createElement("div");
      line.className = "chat-message";
      if (msg.system) {
        line.innerHTML = `<span class="yellow">${msg.text}</span>`;
      } else {
        line.innerHTML = `&lt;tilin&gt; ${msg.text}`;
      }
      chatContainer.appendChild(line);
      scrollToBottom();

      index++;

      if (index < mensajes.length - 1) {
        const continuar = document.createElement("div");
        continuar.className = "click-continue";
        continuar.textContent = "> Click para continuar";
        chatContainer.appendChild(continuar);

        const clickHandler = () => {
          continuar.remove();
          chatContainer.removeEventListener("click", clickHandler);
          setTimeout(mostrarSiguienteMensaje, 100);
        };

        chatContainer.addEventListener("click", clickHandler);
      } else if (index === mensajes.length - 1) {
        const continuar = document.createElement("div");
        continuar.className = "click-continue";
        continuar.textContent = "> Click para continuar";
        chatContainer.appendChild(continuar);

        const clickHandler = () => {
          continuar.remove();
          chatContainer.removeEventListener("click", clickHandler);
          setTimeout(() => {
            const finalMsg = document.createElement("div");
            finalMsg.className = "chat-message yellow";
            finalMsg.textContent = mensajes[mensajes.length - 1].text;
            chatContainer.appendChild(finalMsg);
            scrollToBottom();
          }, 1000);
        };

        chatContainer.addEventListener("click", clickHandler);
      }
    }

    const joined = document.createElement("div");
    joined.className = "chat-message yellow";
    joined.textContent = "tilin joined the game";
    chatContainer.appendChild(joined);
    scrollToBottom();

    setTimeout(() => {
      mostrarSiguienteMensaje();
    }, 1000);
  }

  document.addEventListener("DOMContentLoaded", function() {
    addSelectPrompt("¿Quieres continuar? ", (respuesta1) => {
      if (respuesta1 === "no") {
        addLine("Okei 😔");
        setTimeout(() => limpiarYRedirigir("https://www.google.com"), 3000);
      } else {
        addLine("Buena elección...");
        setTimeout(() => {
          addSelectPrompt("¿Me amas? ", (respuesta2) => {
            if (respuesta2 === "si") {
              let segundos = 3;
              const texto = document.createElement("p");
              const prompt = document.createElement("span");
              prompt.className = "prompt";
              prompt.textContent = "chuki@chukisite:~$ ";
              texto.appendChild(prompt);

              const span = document.createElement("span");
              span.textContent = `Yo mash 💖. Espera ${segundos} segundos`;
              texto.appendChild(span);
              terminal.appendChild(texto);
              scrollToBottom();

              const interval = setInterval(() => {
                segundos--;
                span.textContent = `Yo mash 💖. Espera ${segundos} segundos`;
                if (segundos === 0) {
                  clearInterval(interval);
                  mostrarChatMensajesSecuenciales([
                    { system: true, text: "tilin joined the game" },
                    { text: "Felices 1 año y 6 meses d ser tilines, no te quise hacer una cartita por que te quise hacer algo mas creativo y aqui estoy." },
                    { text: "Tamo con todo mi corazoncito d pollo, perdoname por no ser em mejor y ser el tilin mas molesto que pudiste haber tenido, intento mejorar cada dia para ser de tu agrado." },
                    { text: "Buenio, como te dije antes te amo mucho, porfi pelame, te amo mushino, y si t gusto o algo o m amas, dime cualquier cosita en waza. Anioshiniii." },
                    { system: true, text: "tilin left the game" }
                  ]);
                }
              }, 1000);
            } else {
              addLine("Okei 😔");
              setTimeout(() => limpiarYRedirigir("https://www.google.com"), 3000);
            }
          });
        }, 1000);
      }
    });
  });
</script>

</body>
</html>