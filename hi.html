<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Regalo Especial</title>
  <style>
    /* Fuente de Minecraftia desde CDN fiable */
    @font-face {
      font-family: 'Minecraftia';
      src: url('https://cdn.jsdelivr.net/gh/gregegan/minecraft-font/Minecraftia.ttf') format('truetype');
    }

    /* Estilos generales y terminal */
    body {
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #ccc;
      font-family: Consolas, "Liberation Mono", Courier, monospace;
      font-size: 1.2em;
      height: 100vh;
      overflow: hidden;
      user-select: none;
    }
    #terminal {
      padding: 10px;
      height: 100%;
      overflow-y: auto;
    }
    .prompt {
      color: #8aff80;
    }
    .cursor {
      display: inline-block;
      width: 0.6ch;
      background-color: currentColor;
      animation: blinkCursor 1s steps(2) infinite;
      vertical-align: bottom;
    }
    @keyframes blinkCursor {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    /* Minecraft chat overlay */
    #chatOverlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: url('https://i.imgur.com/3M6LkSd.jpg') center center no-repeat;
      background-size: cover;
      display: none;
      animation: fadeInOverlay 1s ease-in-out forwards;
    }
    @keyframes fadeInOverlay {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    #chatWindow {
      position: absolute;
      bottom: 20px;
      left: 20px;
      background: rgba(0,0,0,0.6);
      padding: 10px 15px;
      border-radius: 5px;
      font-family: 'Minecraftia', monospace;
      font-size: 14px;
      color: #fff;
      text-shadow: 1px 1px 2px #000;
      max-width: 90%;
    }
    .chat-message {
      margin-bottom: 4px;
    }
    .username {
      font-weight: bold;
      margin-right: 4px;
    }
    .blink {
      animation: blinkText 1s steps(2, start) infinite;
      cursor: pointer;
    }
    @keyframes blinkText {
      to { visibility: hidden; }
    }
  </style>
</head>
<body>
  <div id="terminal"></div>

  <!-- Overlay de chat de Minecraft -->
  <div id="chatOverlay">
    <div id="chatWindow"></div>
  </div>

  <script>
    // Recarga al volver con atrÃ¡s
    window.addEventListener('pageshow', (e) => {
      if (e.persisted || performance.getEntriesByType("navigation")[0].type === "back_forward") {
        window.location.reload();
      }
    });

    document.addEventListener("DOMContentLoaded", () => {
      const terminal = document.getElementById("terminal");
      let step = 1;

      function addLine(text, isPrompt = true) {
        const p = document.createElement("p");
        if (isPrompt) {
          const prompt = document.createElement("span");
          prompt.className = "prompt";
          prompt.textContent = "chuki@chukisite:~$ ";
          p.appendChild(prompt);
        }
        const span = document.createElement("span");
        span.textContent = text;
        p.appendChild(span);
        terminal.appendChild(p);
        return span;
      }

      function addSelectPrompt(question, callback) {
        const p = document.createElement("p");
        const prompt = document.createElement("span");
        prompt.className = "prompt";
        prompt.textContent = "chuki@chukisite:~$ ";
        p.appendChild(prompt);

        const label = document.createElement("span");
        label.textContent = question;
        p.appendChild(label);

        const select = document.createElement("select");
        select.style.marginLeft = "8px";
        ["si","no"].forEach(val => {
          const opt = new Option(val === "si" ? "SÃ­":"No", val);
          select.add(opt);
        });
        p.appendChild(select);

        const btn = document.createElement("button");
        btn.textContent = "Confirmar";
        btn.style.marginLeft = "8px";
        p.appendChild(btn);

        terminal.appendChild(p);

        btn.addEventListener("click", () => callback(select.value));
      }

      function redirigir(url) {
        setTimeout(() => window.location.href = url, 3000);
      }

      function launchMinecraftChat() {
        // Oculta terminal
        document.getElementById("terminal").style.display = "none";
        // Muestra overlay
        const overlay = document.getElementById("chatOverlay");
        overlay.style.display = "block";
        const chatWin = document.getElementById("chatWindow");
        // Mensajes iniciales
        chatWin.innerHTML = `
          <div class="chat-message">tilin joined the game</div>
          <div class="chat-message"><span class="username">tilin:</span> Te amo mucho, muchas gracias por pasar este aÃ±o y 6 meses a mi lado</div>
          <div class="chat-message blink" id="clickPrompt">&gt; Click para continuar</div>
        `;
        // Evento click
        document.getElementById("clickPrompt").addEventListener("click", () => {
          document.getElementById("clickPrompt").style.display = "none";
          chatWin.innerHTML += '<div class="chat-message"><span class="username">tilin:</span> Se que no he sido el mejornpero te amo con todo mi corazonzini</div>';
        });
      }

      // Inicio flujo
      addSelectPrompt("Â¿Quieres continuar? ", (ans1) => {
        if (ans1 === "no") {
          addLine("Okei ðŸ˜”");
          redirigir("https://www.google.com");
        } else {
          addLine("Buena elecciÃ³n...");
          setTimeout(() => {
            addSelectPrompt("Â¿Me amas? ", (ans2) => {
              if (ans2 === "no") {
                addLine("Okei ðŸ˜”");
                redirigir("https://www.google.com");
              } else {
                // Paso final: contador en misma lÃ­nea
                let count = 3;
                const span = addLine(`Yo mash ðŸ’–. Espera ${count} segundos`);
                const timer = setInterval(() => {
                  count--;
                  if (count > 0) {
                    span.textContent = `Yo mash ðŸ’–. Espera ${count} segundos`;
                  } else {
                    clearInterval(timer);
                    launchMinecraftChat();
                  }
                }, 1000);
              }
            });
          }, 800);
        }
      });
    });
  </script>
</body>
</html>