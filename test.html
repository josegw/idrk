<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Protección con llave</title>
  <style>
    #notification {
      display: none;
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #f0f0f0;
      border: 1px solid #aaa;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      z-index: 999;
    }
  </style>
</head>
<body>
  <h2>Introduce tu llave para acceder</h2>
  <input type="text" id="keyInput" placeholder="Llave">
  <button onclick="verifyKey()">Verificar</button>
  <p id="result"></p>

  <br><br>
  <button onclick="getKey()">Conseguir llave</button>

  <div id="notification">
    <p>¡Llave generada!</p>
    <input type="text" id="generatedKey" readonly>
    <button onclick="copyKey()">Copiar llave</button>
    <button onclick="closeNotification()">Cerrar</button>
  </div>

  <script>
    const validKey = "XYZ123"; // Aquí está la llave válida

    // Si hay un ?key en la URL, mostrar la notificación
    const urlParams = new URLSearchParams(window.location.search);
    const newKey = urlParams.get('key');
    if (newKey) {
      document.getElementById("notification").style.display = "block";
      document.getElementById("generatedKey").value = newKey;
    }

    function verifyKey() {
      const input = document.getElementById("keyInput").value.trim();
      const result = document.getElementById("result");
      if (input === validKey) {
        result.textContent = "Llave válida. Redirigiendo...";
        setTimeout(() => {
          window.location.href = "contenido.html"; // Página final
        }, 1500);
      } else {
        result.textContent = "Llave inválida.";
      }
    }

    function getKey() {
      // Aquí pones tu enlace de Linkvertise con redirección al volver
      // Ejemplo: https://linkvertise.com/12345/tu-oferta?o=share
      // Redirige a tu dominio con ?key=XYZ123 después de completar
      window.location.href = "https://linkvertise.com/12345/tu-oferta?o=share&redirect=https://tusitio.com/index.html?key=XYZ123";
    }

    function copyKey() {
      const copyText = document.getElementById("generatedKey");
      copyText.select();
      copyText.setSelectionRange(0, 99999); // Móvil
      document.execCommand("copy");
      alert("Llave copiada al portapapeles");
    }

    function closeNotification() {
      document.getElementById("notification").style.display = "none";
    }
  </script>
</body>
</html>
